if(void 0===graphtube)var graphtube={};function getRandomInt(a,d){return Math.floor(Math.random()*(d-a+1))+a}graphtube&&void 0===graphtube.data&&(graphtube.data={});
graphtube.data.youtube={baseURL:"https://gdata.youtube.com/feeds/api/",NUM_RESULTS:"&max-results=50",init:function(){this.STANDARD_FEEDS=[this.baseURL+"standardfeeds/top_rated?alt=json"+this.NUM_RESULTS,this.baseURL+"standardfeeds/top_favorites?alt=json"+this.NUM_RESULTS,this.baseURL+"standardfeeds/most_viewed?alt=json"+this.NUM_RESULTS,this.baseURL+"standardfeeds/most_shared?alt=json"+this.NUM_RESULTS,this.baseURL+"standardfeeds/most_popular?alt=json"+this.NUM_RESULTS,this.baseURL+"standardfeeds/most_recent?alt=json"+
this.NUM_RESULTS,this.baseURL+"standardfeeds/most_discussed?alt=json"+this.NUM_RESULTS,this.baseURL+"standardfeeds/most_responded?alt=json"+this.NUM_RESULTS,this.baseURL+"standardfeeds/recently_featured?alt=json"+this.NUM_RESULTS,this.baseURL+"standardfeeds/on_the_web?alt=json"+this.NUM_RESULTS];return this}}.init();
graphtube.data.youtube.getEntries=function(a,d){a||(a=graphtube.data.youtube.STANDARD_FEEDS[getRandomInt(0,graphtube.data.youtube.STANDARD_FEEDS.length-1)]);$.get(a,function(a){for(var e=a.feed.title.$t,a=a.feed.entry,f=[],g=0;g<a.length;g++){var b=a[g],b={published:b.published.$t,updated:b.updated.$t,userID:b.author[0].name.$t,category:null,title:b.title.$t,thumbnails:b.media$group.media$thumbnail,duration:b.media$group.yt$duration?parseInt(b.media$group.yt$duration.seconds,10):null,averageRating:b.gd$rating?
parseFloat(b.gd$rating.average):null,numRaters:b.gd$rating?parseInt(b.gd$rating.numRaters,10):null,favoriteCount:b.yt$statistics?parseInt(b.yt$statistics.favoriteCount,10):null,viewCount:b.yt$statistics?parseInt(b.yt$statistics.viewCount,10):null,keywords:b.media$group.media$keywords?b.media$group.media$keywords.$t:null,HD:b.yt$hd?true:false,link:b.link[0].href};f.push(b)}d(e,f)},"json")};graphtube.app=function(a){this.options=$.extend({},{},a||{});$(function(){this.init()}.bind(this))};
graphtube.app.UI=function(a){this.options=$.extend({},{RESULT_COLUMNS:4,RESULT_ROWS:4},a||{});this.cursor_row=this.cursor_col=0;this.init()};graphtube.app.prototype={init:function(){this.UI=new graphtube.app.UI(this.options);graphtube.data.youtube.getEntries(null,function(a,d){this.UI.showResult(document.getElementById(this.options.resultsDivID),d);this.UI.updateCurrentFeedTitle(a)}.bind(this))}};
graphtube.app.UI.prototype={init:function(){this.bindInputEvents()},bindInputEvents:function(){$("#"+this.options.searchID).submit(function(){var a=$("input:first").val();a.length>0&&graphtube.data.youtube.getEntries(graphtube.data.youtube.baseURL+"videos?q="+a+"&alt=json"+graphtube.data.youtube.NUM_RESULTS,function(a,c){this.showResult(document.getElementById(this.options.resultsDivID),c);this.updateCurrentFeedTitle(a)}.bind(this))}.bind(this))},showResult:function(a,d){$(a).empty();for(var c=0;c<
d.length;c++)if(d[c].thumbnails){var e=this.getYoutubeDivFromEntry(d[c]);a.appendChild(e)}c=$(a).parent().innerWidth();c=c/this.options.RESULT_COLUMNS/c*100;$("div."+this.options.resultsDivClass).width(c+"%")},getYoutubeDivFromEntry:function(a){var d=document.createElement("a"),c=document.createElement("div"),e=document.createElement("div"),f=document.createElement("img");c.className=this.options.resultsDivClass;e.className="result_title";f.src=a.thumbnails[0].url;f.className="entry_thumbnail";e.innerHTML=
a.title;d.target="_blank";d.href=a.link;d.appendChild(f);c.appendChild(d);c.appendChild(e);return c},updateCurrentFeedTitle:function(a){$("#feed_title").html(a)}};$(function(){new graphtube.app({resultsDivID:"results",resultsDivClass:"resultDiv",searchID:"search_container"});$("#search_button").click(function(){$("#search_container").submit()});$("#logo").click(function(){window.location.reload()})});